(this.webpackJsonpgradparty=this.webpackJsonpgradparty||[]).push([[0],{10:function(e,t,n){},11:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),i=n(4),a=n.n(i),s=(n(10),n(2)),o=(n(11),n(5)),l=n(0),d=new o,u=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform?"https://maps.apple.com/?q=":"https://www.google.com/maps?q=",j=new window.Math.seedrandom("samyok");var b=[["#a63238","#ffc0c0"],["#d38773","#ffd0a5"],["#76b488","#bdffa7"],["#4e84d5","#b3e7ff"],["#6b45a1","#d2d6ff"]];function h(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){function e(e){var t=Array.from(document.querySelectorAll(".eventHeader"));t.forEach((function(e){return e.classList.remove("sticky")}));for(var n=0;n<t.length-1&&!(t[n+1].getBoundingClientRect().y>0);)n++;t[n].classList.add("sticky"),t[n+1]&&t[n+1].getBoundingClientRect().y<t[n+1].offsetHeight?t[n].style.top=t[n+1].getBoundingClientRect().y-t[n+1].offsetHeight+"px":t[n].style.top="0px"}fetch("/data").then((function(e){return e.json()})).then((function(e){return c(e)})),document.addEventListener("scroll",e),document.addEventListener("resize",e)}),[]),Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("h1",{children:"'21 Grad Parties"}),Object(l.jsxs)("p",{children:["Add your graduation party to this list by clicking ",Object(l.jsx)("a",{href:"/add",children:"here"}),"! \ud83c\udf93\ud83c\udf89"]}),Object(l.jsx)("p",{children:"Everyone's invited to the following open houses! Text me (605-592-6144) if anything needs changing."}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),n.map((function(e,t){for(var n=[];n.length<e.listings.length;){var r=b.length*j()>>0;n.length>0&&n[n.length-1]===r||(console.log(n),n.push(r))}return Object(l.jsxs)("div",{children:[Object(l.jsxs)("h2",{className:"eventHeader",children:["\ud83c\udf8a ",e.name]}),Object(l.jsx)("br",{}),e.listings.map((function(e,t){return Object(l.jsx)(m,{listing:e,colorIndex:n[t]},t+JSON.stringify(e))})),Object(l.jsx)("br",{}),Object(l.jsx)("br",{})]},t+JSON.stringify(e))}))]})}function m(e){var t=e.listing,n=e.colorIndex,r=b[n];return Object(l.jsxs)("div",{className:"event row",style:{flexWrap:"nowrap",borderLeft:"3px solid ".concat(r[0]),backgroundColor:r[1]},children:[!!t.image&&Object(l.jsx)("img",{src:t.image,alt:"event avatar",style:{marginRight:10}}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:t.name}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("pre",{style:{paddingRight:20},children:t.timeString}),Object(l.jsx)("p",{children:t.description})]}),Object(l.jsxs)("a",{target:"_blank",href:u+t.address,children:["\ud83d\udccd ",t.address]})]})]})}function p(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(!1),a=Object(s.a)(i,2),o=a[0],u=a[1],j=Object(r.useCallback)((function(){var e;u(!0);var t=null===(e=document.querySelector("#upload"))||void 0===e?void 0:e.files[0];if(!t)return window.confirm("Are you sure you don't want to submit an image?")?r(null):void 0;function r(e){fetch("/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:n,name:document.querySelector("#eventName").value,day:document.querySelector("#day").value,startTime:document.querySelector("#startTime").value,endTime:document.querySelector("#endTime").value,address:document.querySelector("#address").value,phoneNumber:document.querySelector("#phonenumber").value,image:e})}).then((function(e){return e.json()})).then((function(e){u(!1),e.success?(alert("Added event successfully!"),window.location.href="/"):alert(e.error)}))}d.compress([t],{maxWidth:300,maxHeight:300,resize:!0}).then((function(e){console.log(e),r(e[0].prefix+e[0].data)}))}),[n]);return Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("h1",{children:"'21 Grad Parties"}),Object(l.jsx)("p",{children:"Add your graduation party to this list by filling out the form below! \ud83c\udf93\ud83c\udf89"}),Object(l.jsxs)("label",{htmlFor:"eventName",children:["Event Name *",Object(l.jsx)("input",{type:"text",placeholder:"Name of event",id:"eventName"})]}),Object(l.jsxs)("label",{htmlFor:"day",children:["Date *",Object(l.jsx)("input",{type:"date",id:"day"})]}),Object(l.jsxs)("label",{htmlFor:"startTime",children:["Start Time *",Object(l.jsx)("input",{type:"time",id:"startTime"})]}),Object(l.jsxs)("label",{htmlFor:"endTime",children:["End Time *",Object(l.jsx)("input",{type:"time",id:"endTime"})]}),Object(l.jsxs)("label",{htmlFor:"description",children:["Description",Object(l.jsx)(f,{limit:250,onChange:function(e){return c(e)}})]}),Object(l.jsxs)("label",{htmlFor:"address",children:["Address (street AND city!) *",Object(l.jsx)("input",{type:"text",id:"address",placeholder:"1600 Pennsylvania Avenue, Washington, D.C."})]}),Object(l.jsxs)("label",{htmlFor:"upload",children:["Upload Image",Object(l.jsx)("input",{type:"file",id:"upload"})]}),Object(l.jsx)("p",{children:"Note: Images will be warped to fit to a square if they are not already one!"}),Object(l.jsxs)("label",{htmlFor:"phonenumber",children:["Submitter's Contact Phone Number *",Object(l.jsx)("input",{type:"tel",id:"phonenumber"})]}),Object(l.jsx)("button",{onClick:j,disabled:o,children:o?"Loading...":"Post"})]})}var f=function(e){var t=e.rows,n=e.cols,c=e.value,i=void 0===c?"":c,a=e.limit,o=e.onChange,d=void 0===o?function(){}:o,u=Object(r.useState)(i.slice(0,a)),j=Object(s.a)(u,2),b=j[0],h=j[1],m=Object(r.useCallback)((function(e){h(e.slice(0,a)),d(e.slice(0,a))}),[a,d]);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("textarea",{rows:t,cols:n,onChange:function(e){return m(e.target.value)},value:b,placeholder:"up to ".concat(a," characters")}),Object(l.jsxs)("span",{children:[b.length,"/",a]})]})},O=function(){return Object(l.jsxs)(l.Fragment,{children:[window.location.pathname.includes("add")?Object(l.jsx)(p,{}):Object(l.jsx)(h,{}),Object(l.jsxs)("div",{className:"footer",children:["Created by Samyok Nepal | ",Object(l.jsx)("a",{target:"_blank",href:"https://github.com/samyok/gradparty",children:"Github"})]})]})};a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(O,{})}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.08613c0d.chunk.js.map