(this.webpackJsonpgradparty=this.webpackJsonpgradparty||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(4),i=n.n(c),s=(n(9),n(2)),o=(n(10),n(0)),l=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform?"https://maps.apple.com/?q=":"https://www.google.com/maps?q=",d=new window.Math.seedrandom("samyok");var u=[["#a63238","#ffc0c0"],["#d38773","#ffd0a5"],["#76b488","#bdffa7"],["#4e84d5","#b3e7ff"],["#6b45a1","#d2d6ff"]];function j(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(e){var t=Array.from(document.querySelectorAll(".eventHeader"));t.forEach((function(e){return e.classList.remove("sticky")}));for(var n=0;n<t.length-1&&!(t[n+1].getBoundingClientRect().y>0);)n++;t[n].classList.add("sticky"),t[n+1]&&t[n+1].getBoundingClientRect().y<t[n+1].offsetHeight?t[n].style.top=t[n+1].getBoundingClientRect().y-t[n+1].offsetHeight+"px":t[n].style.top="0px"}fetch("/data").then((function(e){return e.json()})).then((function(e){return a(e)})),document.addEventListener("scroll",e),document.addEventListener("resize",e)}),[]),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("h1",{children:"'21 Grad Parties"}),Object(o.jsxs)("p",{children:["Add your graduation party to this list by clicking ",Object(o.jsx)("a",{href:"/add",children:"here"}),"! \ud83c\udf93\ud83c\udf89"]}),Object(o.jsx)("p",{children:"Everyone's invited to the following open houses! Text me (605-592-6144) if anything needs changing."}),Object(o.jsx)("br",{}),Object(o.jsx)("br",{}),n.map((function(e,t){for(var n=[];n.length<e.listings.length;){var r=u.length*d()>>0;n.length>0&&n[n.length-1]===r||(console.log(n),n.push(r))}return Object(o.jsxs)("div",{children:[Object(o.jsxs)("h2",{className:"eventHeader",children:["\ud83c\udf8a ",e.name]}),Object(o.jsx)("br",{}),e.listings.map((function(e,t){return Object(o.jsx)(b,{listing:e,colorIndex:n[t]},t+JSON.stringify(e))})),Object(o.jsx)("br",{}),Object(o.jsx)("br",{})]},t+JSON.stringify(e))}))]})}function b(e){var t=e.listing,n=e.colorIndex,r=u[n];return Object(o.jsxs)("div",{className:"event row",style:{flexWrap:"nowrap",borderLeft:"3px solid ".concat(r[0]),backgroundColor:r[1]},children:[!!t.image&&Object(o.jsx)("img",{src:t.image,alt:"event avatar",style:{marginRight:10}}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:t.name}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("pre",{style:{paddingRight:20},children:t.timeString}),Object(o.jsx)("p",{children:t.description})]}),Object(o.jsxs)("a",{target:"_blank",href:l+t.address,children:["\ud83d\udccd ",t.address]})]})]})}function h(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useCallback)((function(){var e=document.querySelector("#upload").files[0];if(!e)return window.confirm("Are you sure you don't want to submit an image?")?r(null):void 0;var t=new FileReader;function r(e){fetch("/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:n,name:document.querySelector("#eventName").value,day:document.querySelector("#day").value,startTime:document.querySelector("#startTime").value,endTime:document.querySelector("#endTime").value,address:document.querySelector("#address").value,phoneNumber:document.querySelector("#phonenumber").value,image:e})}).then((function(e){return e.json()})).then((function(e){e.success?(alert("Added event successfully!"),window.location.href="/"):alert(e.error)}))}t.onload=function(e){r(e.target.result)},t.readAsDataURL(e)}),[n]);return Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("h1",{children:"'21 Grad Parties"}),Object(o.jsx)("p",{children:"Add your graduation party to this list by filling out the form below! \ud83c\udf93\ud83c\udf89"}),Object(o.jsxs)("label",{htmlFor:"eventName",children:["Event Name *",Object(o.jsx)("input",{type:"text",placeholder:"Name of event",id:"eventName"})]}),Object(o.jsxs)("label",{htmlFor:"day",children:["Date *",Object(o.jsx)("input",{type:"date",id:"day"})]}),Object(o.jsxs)("label",{htmlFor:"startTime",children:["Start Time *",Object(o.jsx)("input",{type:"time",id:"startTime"})]}),Object(o.jsxs)("label",{htmlFor:"endTime",children:["End Time *",Object(o.jsx)("input",{type:"time",id:"endTime"})]}),Object(o.jsxs)("label",{htmlFor:"description",children:["Description",Object(o.jsx)(m,{limit:250,onChange:function(e){return a(e)}})]}),Object(o.jsxs)("label",{htmlFor:"address",children:["Address (street AND city!) *",Object(o.jsx)("input",{type:"text",id:"address",placeholder:"1600 Pennsylvania Avenue, Washington, D.C."})]}),Object(o.jsxs)("label",{htmlFor:"upload",children:["Upload Image",Object(o.jsx)("input",{type:"file",id:"upload"})]}),Object(o.jsx)("p",{children:"Note: Images will be warped to fit to a square if they are not already one!"}),Object(o.jsxs)("label",{htmlFor:"phonenumber",children:["Submitter's Contact Phone Number *",Object(o.jsx)("input",{type:"tel",id:"phonenumber"})]}),Object(o.jsx)("button",{onClick:c,children:"Post"})]})}var m=function(e){var t=e.rows,n=e.cols,a=e.value,c=void 0===a?"":a,i=e.limit,l=e.onChange,d=void 0===l?function(){}:l,u=Object(r.useState)(c.slice(0,i)),j=Object(s.a)(u,2),b=j[0],h=j[1],m=Object(r.useCallback)((function(e){h(e.slice(0,i)),d(e.slice(0,i))}),[i,d]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("textarea",{rows:t,cols:n,onChange:function(e){return m(e.target.value)},value:b,placeholder:"up to ".concat(i," characters")}),Object(o.jsxs)("span",{children:[b.length,"/",i]})]})},p=function(){return Object(o.jsxs)(o.Fragment,{children:[window.location.pathname.includes("add")?Object(o.jsx)(h,{}):Object(o.jsx)(j,{}),Object(o.jsxs)("div",{className:"footer",children:["Created by Samyok Nepal | ",Object(o.jsx)("a",{target:"_blank",href:"https://github.com/samyok/gradparty",children:"Github"})]})]})};i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(p,{})}),document.getElementById("root"))},9:function(e,t,n){}},[[12,1,2]]]);
//# sourceMappingURL=main.e9d600d0.chunk.js.map